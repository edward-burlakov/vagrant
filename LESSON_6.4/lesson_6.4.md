## Домашнее задание к занятию "6.4. PostgreSQL"


---
### Задача 1

- Используя docker поднимите инстанс PostgreSQL (версию 13). Данные БД сохраните в volume.
- Подключитесь к БД PostgreSQL используя psql.
- Воспользуйтесь командой \? для вывода подсказки по имеющимся в psql управляющим командам.
- Найдите и приведите управляющие команды для:
    вывода списка БД
    подключения к БД
    вывода списка таблиц
    вывода описания содержимого таблиц
    выхода из psql

---
### Ответ:

1) Поднимаем инстанс PostreSQL         

            root@docker:/home/bes/#  docker run -d -it    --name postgres13   -e POSTGRES_PASSWORD=mysecretpassword   -p 5432:5432  \ 
            -v $(pwd)/data:/var/lib/postgresql/data   postgres:13 

2) Входим в запущенный контейнер

             root@docker:/home/bes/data#  docker exec -it   dd8781c1393e  /bin/bash

3) Запускаем PostgreSQL интерактивно 
   
             root@docker:/home/bes/data# psql -U postgres

4) Устанавливаем подключение к БД с помощью psql 

            root@docker:/home/bes/data#  psql postgres_db postgres;   ( или psql -Upostgres  -dtest_db )

5) Выводим список команд  
                        
            postgres_db=# \?

6) Смотрим список таблиц

            postgres_db=# \dt
            public | clients | table | postgres
            public | orders  | table | postgres

7) Смотрим содержимое таблиц

            postgres_db=# \d clients

8) Выходим 

            postgres_db=# quit


---
### Задача 2
Используя psql создайте БД test_database.
Изучите бэкап БД.
Восстановите бэкап БД в test_database.
Перейдите в управляющую консоль psql внутри контейнера.
Подключитесь к восстановленной БД и проведите операцию ANALYZE для сбора статистики по таблице.
Используя таблицу pg_stats, найдите столбец таблицы orders с наибольшим средним значением размера элементов в байтах.
Приведите в ответе команду, которую вы использовали для вычисления и полученный результат.


---
### Ответ:


---
### Задача 3
- Архитектор и администратор БД выяснили, что ваша таблица orders разрослась до невиданных размеров и поиск по ней 
- занимает долгое время. Вам, как успешному выпускнику курсов DevOps в нетологии предложили провести разбиение таблицы 
- на 2 (шардировать на orders_1 - price>499 и orders_2 - price<=499).
- Предложите SQL-транзакцию для проведения данной операции.
- Можно ли было изначально исключить "ручное" разбиение при проектировании таблицы orders?


---
### Ответ:


---
### Задача 4

- Используя утилиту pg_dump создайте бекап БД test_database.
- Как бы вы доработали бэкап-файл, чтобы добавить уникальность значения столбца title для таблиц test_database?


---
### Ответ:
