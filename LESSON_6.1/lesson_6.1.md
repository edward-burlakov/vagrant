## Домашнее задание к занятию "6.1. Типы и структура СУБД"

### Задача 1
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.
Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:
  - Электронные чеки в json виде
  - Склады и автомобильные дороги для логистической компании
  - Генеалогические деревья
  - Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации
  - Отношения клиент-покупка для интернет-магазина
  
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

----
### Ответ:

    - Электронные чеки в json виде  - Документоориентированное СУБД. Удобно хранить информацию о чеках в формате JSON-объекта.

    - Склады и автомобильные дороги для логистической компании. Можно выбрать Сетевую - иерархическая с множеством узлов.
      Или графовую NoSQL. Магистрали, связывающие склады, удобно хранить в виде графов.

    - Генеалогические деревья   - явная иерархическая  СУБД  с одним родителем, например Адамом. 
      Родственные связи  можно хранить в графовой СУБД ,например Neo4j  или Amazon Neptune.

    - Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации  - БД формата NoSQL, например MongoDB. 
      Мгновенное получение значений + Ограничение времени хранения  кэша.

    - Отношения клиент-покупка для интернет-магазина   - Удобно  хранить данных  в формате "Ключ-значение",следовательно БД формата NoSQL. 
      Используем, например, БД Redis, как кэш для ускорения работы WEB интерфейса. 

----
### Задача 2
Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. 
Какой классификации по CAP-теореме соответствует ваша система, 
если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):
Данные записываются на все узлы с задержкой до часа (асинхронная запись)
При сетевых сбоях, система может разделиться на 2 раздельных кластера
Система может не прислать корректный ответ или сбросить соединение
А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

### Ответ:
----
    Данные записываются на все узлы с задержкой до часа (асинхронная запись):    -    CA, EL-PC
    При сетевых сбоях, система может разделиться на 2 раздельных кластера:       -    AP, PA-EL
    Система может не прислать корректный ответ или сбросить соединение:          -    CP, PA-EC

----
### Задача 3
 Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

----
#### Ответ:

    Принципы ACID - требования к СУБД в обеспечении надежности СУБД.
    Принципы BASE - организация работы БД, нацеленное на максимальное число запросов.  
    Нельзя одновременно соблюсти принципы ACID  и BASE,  поскольку в СУБД, построенном
    на наборе принципов BASE присутствует неустойчивое состояние soft-state, 
    при котором не соблюдается требование consistency - согласованность поступающих в БД данных.

----
### Задача 4
Вам дали задачу написать системное решение, основой которого бы послужили:
- Фиксация некоторых значений с временем жизни, 
- реакция на истечение таймаута
Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора данной системы?

----
### Ответ:
  При вышеуказанных  требованиях в роли хранилища пар key-value проще всего использовать СУБД Redis.

  1) Она имеет возможность фиксировать данные в персистентное хранилище по таймауту на базе 
  встроенного механизма снэпшотов и  репликации на соседние сервера Redis.
  2) Данным можно присваивать параметр Time-To-Live для реакции на истечение таймаута.  
  3) Механизм Pub/Sub присутствует.
  Данный выбор также сделан на основании того, что в задании четко не определены типы хранящихся значений,
  а Redis поддерживает  широкий набор абстрактных типов данных: строки, списки, множества, хеш-таблицы, упорядоченные множества.   
   
  - Как основное преимущество, так и  главный минус данной БД  заключается в том, что данные хранятся только в RAM.
      поэтому требуются достаточный запас RAM (оперативной памяти). 
  - при аварийном выключении  экземпляра БД (питание сервера или сбой гипервизора)
    все данные с момента последней синхронизации с файловым хранилищем будут утеряны.
  - при потере реплики-мастера, надо вручную выбирать новую на эту роль. 